(テーマ) ネットワークバイトオーダー 
===================================

実習内容
--------
ネットワークバイトオーダーを実感するプログラムを書く。

方針
----

整数0x12345678を

    union my_num {
        int num;
        unsigned char buf[4];
    };
    my_num x.num = 0x12345678;

とunionを使って定義し、バイトオーダを確認するプログラムを書く。

変換は

    #include <apra/inet.h>
    
    int x = 0x12345678;
    int y = htonl(x);
    int z = ntohl(y);

のように行う。

htonl()を使うために必要なインクルードファイルはman htonlするとSYNOPSISの
ところに書いているとおりで、上の例のように

    #include <apra/inet.h>

が必要。

unionは上のように定義したときにx.numとするとintとしてアクセスできる。
これとおなじ内容でunsigned charとしてアクセスするときには
x.buf[0], x.buf[1], x.buf[2], x.buf[3]を使う。

出力例:

    変数名: 変数アドレス: 配列インデックス: 値
    
    x: 0x7fff78597440 0 0x78
    x: 0x7fff78597441 1 0x56
    x: 0x7fff78597442 2 0x34
    x: 0x7fff78597443 3 0x12
    y: 0x7fff78597430 0 0x12
    y: 0x7fff78597431 1 0x34
    y: 0x7fff78597432 2 0x56
    y: 0x7fff78597433 3 0x78

サンプルコードはこのディレクトリにおいてあるのでなにを書いたら
よいのかわからない場合はこれをコピーして学習する。

バイトオーダーの変更
--------------------

buf[0] buf[1] buf[2] buf[3]で整数(ネットワークバイトオーダ)
の整数値を取り出す方法としては、講義でとりあげたintのポインタを
使ってntohl()関数を使う他に

```
  buf[0]*256*256*256
+ buf[1]*256*256
+ buf[2]*256
+ buf[3]
```

とする方法もある。どちらかわかりやすい方法を使えばよい。

---

[ex04](../ex04/)
